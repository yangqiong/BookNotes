## IP协议

* 4位版本号：4 - IPv4
* 4位头部长度：单位字节，最大值为15，所以IP头部最长60字节
* 8为服务类型：前3位已忽略，4为TOS字段，最多有一个可以设置为1，分别表示最小延时，最大吞吐量，最高可靠性，最小费用；和1位保留字必须为0
* 16为总长度（整个IP数据包）：最大为65535字节，长度超过MTU（以太网MTU最大为1500字节）的数据包被分片，所以实际传输的IP数据包远没有达到最大值。
* 3位标志：第一位保留，第二位如果为1表示禁止分片\(Don't Fragment, DF\)，如果此时IP数据报超过MTU，IP模块将丢弃该数据包并返回一个ICMP差错报文。第三位表示更多分片（More Fragment, MF），除了数据报的最好一个分片外，其他分片都要把它置1。
* 13位分片偏移：是指分片相对原始IP数据包开始处（仅数据部分）的偏移。实际偏移值左移3位（乘8）后得到。所以每个IP分片的数据部分长度必须为8的整数倍，除最后一个。
* 8位生存时间（Time To Live, TTL）：是数据报到达目的地之前允许经过的路由器跳数。常见为64。
* 8位协议：1 - ICMP 2 - TCP 17 - UDP
* 16位头部校验码
* 32位源端IP地址和32位目的端IP地址
* 选项字段最多40字节。记录路由，时间戳，松散源路由选择，严格源路由选择。

最多60字节，其中20字节固定部分

